<div class="root">

  <div class="parent">
    <app-comment-item-content 
      diameter="50"
      ownerType="post"
      [ownerId]="postId"
      [comment]="comment"
      [postId]="postId">
    </app-comment-item-content>
  </div>

  <div class="children" *ngIf="comment && comment.countOfChildren > 0">

    <ng-container *ngIf="childrenVisibility$ | async; else template">

      <div class="load-children">
        <hr class="line" />
        <span *ngIf="remainingChildrenCount > 0" (click)="loadChildren()" class="load-children-button">
          {{remainingChildrenCount + ' yaniti goster'}}
        </span>
      </div>
  
      <div class="child" *ngFor="let child of (children$ | async)">
        <app-comment-item-content 
          diameter="40" 
          [comment]="child" 
          [hasChildren]="false"
          [ownerId]="comment.id"
          ownerType="comment"
          [postId]="postId">
        </app-comment-item-content>
      </div>

      <div *ngIf="remainingChildrenCount >= 0 && remainingChildrenCount < comment.countOfChildren" class="show-children">
        <hr class="line" />
        <span (click)="hiddenChildren()" class="show-children-button">
          {{comment.countOfChildren - remainingChildrenCount + ' yaniti gizle'}}
        </span>
      </div>
    </ng-container>

    <ng-template #template>
      <div *ngIf="remainingChildrenCount >= 0 && remainingChildrenCount <= comment.countOfChildren" class="hide-children">
        <hr class="line" />
        <span (click)="showChildren()" class="hide-children-button">
          {{comment.countOfChildren + ' yaniti goster'}}
        </span>
      </div>
    </ng-template>


  </div>
</div>
